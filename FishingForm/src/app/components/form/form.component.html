<div class="container">
    <h2>Buy a ticket</h2>

    <p>{{ticketForm.value | json}}</p>

    <form [formGroup]="ticketForm" class="ticketForm" (ngSubmit)="onSubmit()">

        <h4>User info:</h4>
        <div formGroupName="profile">

            <div class="form-control">
                <!-- <app-input text="First Name" identificator="firstName"></app-input> -->
                <!-- <label for="firstName">First Name: </label>
                <input id="firstName" type="text" formControlName="firstName" placeholder="Enter your first name"> -->


                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>First Name</mat-label>
                    <input matInput id="firstName" type="text" formControlName="firstName">
                    <mat-error
                        *ngIf="this.ticketForm.get('profile.firstName')?.touched && this.ticketForm.get('profile.firstName')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">
                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Middle Name</mat-label>
                    <input matInput id="middleName" type="text" formControlName="middleName">
                    <mat-error
                        *ngIf="this.ticketForm.get('profile.middleName')?.touched && this.ticketForm.get('profile.middleName')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">
                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Last Name</mat-label>
                    <input matInput id="lastName" type="text" formControlName="lastName">
                    <mat-error
                        *ngIf="this.ticketForm.get('profile.lastName')?.touched && this.ticketForm.get('profile.lastName')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">

                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Phone Number</mat-label>
                    <input matInput id="phoneNumber" type="text" formControlName="phoneNumber">
                    <mat-error
                        *ngIf="this.ticketForm.get('profile.phoneNumber')?.touched && this.ticketForm.get('profile.phoneNumber')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">
                <!-- <label for="email">Email: </label>
                <input id="email" type="text" formControlName="email" placeholder="Enter your email">
                -->
                <mat-form-field class="form-full-width" appearance="fill">
                    <mat-label>Email</mat-label>
                    <input type="email" matInput formControlName="email" placeholder="Ex.mes@example.com">
                    <mat-error
                        *ngIf="(this.ticketForm.get('profile.email')?.touched && this.ticketForm.get('profile.email')?.hasError('email'))">
                        Please enter a valid email address
                    </mat-error>
                    <mat-error *ngIf="this.ticketForm.get('profile.email')?.hasError('required')">
                        Email is <strong>required</strong>
                    </mat-error>
                </mat-form-field>

            </div>

            <div class="form-control">

                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>ID Card Number</mat-label>
                    <input matInput id="idCardNumber" type="number" formControlName="idCardNumber">
                    <mat-error
                        *ngIf="this.ticketForm.get('profile.idCardNumber')?.touched && this.ticketForm.get('profile.idCardNumber')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">

                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Identification Number</mat-label>
                    <input matInput id="identificationNumber" type="text" formControlName="identificationNumber">

                    <mat-error
                        *ngIf="this.ticketForm.get('profile.identificationNumber')?.hasError('minLength') && this.ticketForm.get('profile.identificationNumber')?.hasError('maxLength')">
                        Field must be at least 9 numbers
                    </mat-error>
                    <mat-error *ngIf="this.ticketForm.get('profile.identificationNumber')?.hasError('required')">
                        Field is <strong>required</strong>
                    </mat-error>

                </mat-form-field>

            </div>

            <div formGroupName="address">
                <div class="form-control">

                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>Country</mat-label>
                        <mat-select disableRipple id="country" name="country" formControlName="country">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error
                        *ngIf="this.ticketForm.get('profile.address.country')?.touched && this.ticketForm.get('profile.address.country')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                    </mat-form-field>

                </div>

                <div class="form-control">
                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>Area</mat-label>
                        <mat-select disableRipple id="area" name="area" formControlName="area">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error
                        *ngIf="this.ticketForm.get('profile.address.area')?.touched && this.ticketForm.get('profile.address.area')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                    </mat-form-field>
                </div>

                <div class="form-control">
                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>Municipality</mat-label>
                        <mat-select disableRipple id="municipality" name="municipality" formControlName="municipality">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error
                        *ngIf="this.ticketForm.get('profile.address.municipality')?.touched && this.ticketForm.get('profile.address.municipality')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                    </mat-form-field>
                </div>

                <div class="form-control">
                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>City</mat-label>
                        <mat-select disableRipple id="city" name="city" formControlName="city">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error
                        *ngIf="this.ticketForm.get('profile.address.city')?.touched && this.ticketForm.get('profile.address.city')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                    </mat-form-field>
                </div>

                <div class="form-control">
                    <mat-form-field class="ticket-form-field" appearance="fill">
                        <mat-label>Street</mat-label>
                        <input matInput id="street" type="text" formControlName="street">
                        <mat-error
                            *ngIf="this.ticketForm.get('profile.address.street')?.touched && this.ticketForm.get('profile.address.street')?.hasError('required')">
                            Field is <strong> required </strong></mat-error>
                    </mat-form-field>
                </div>
            </div>

        </div>

        <h4>Ticket info:</h4>
        <div formGroupName="ticket">

            <div class="form-control custom-select">
                <mat-form-field appearance="fill" class="ticket-form-field">
                    <mat-label>Type</mat-label>
                    <mat-select disableRipple id="type" name="type" formControlName="type">
                        <!-- To do: Implement ngFor -->
                        <mat-option *ngFor="let type of types" [value]="type">{{type}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.ticketForm.get('ticket.type')?.touched && this.ticketForm.get('ticket.type')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">
                <mat-form-field appearance="fill" class="ticket-form-field">
                    <mat-label>Duration</mat-label>
                    <mat-select disableRipple id="duration" name="duration" formControlName="duration">
                        <!-- To do: Implement ngFor -->
                        <mat-option *ngFor="let dur of durations" [value]="dur">{{dur}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.ticketForm.get('ticket.duration')?.touched && this.ticketForm.get('ticket.duration')?.hasError('required')">
                        Field is <strong> required </strong></mat-error>
                </mat-form-field>
            </div>

        </div>


        <p class="center">Total: {{price | currency : "BGN "}}</p>
        <app-button color="blue" text="Submit" (click)="submitData()"></app-button>
    </form>

</div>